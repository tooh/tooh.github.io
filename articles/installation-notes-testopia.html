<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Installation notes Testopia | Daily Scrum
</title>
  <link rel="canonical" href="https://blog.florijnconsultancy.nl/articles/installation-notes-testopia.html">


  <link rel="stylesheet" href="https://blog.florijnconsultancy.nl/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://blog.florijnconsultancy.nl/theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="https://blog.florijnconsultancy.nl/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="https://blog.florijnconsultancy.nl/theme/css/theme.css">

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="https://blog.florijnconsultancy.nl/feeds/all.atom.xml">
  <link rel="alternate" type="application/rss+xml" title="Full RSS Feed"
        href="https://blog.florijnconsultancy.nl/feeds/all.rss.xml">  <link rel="alternate" type="application/atom+xml" title="Categories Atom Feed"
        href="https://blog.florijnconsultancy.nl/feeds/installation.atom.xml">  <link rel="alternate" type="application/rss+xml" title="Categories RSS Feed"
        href="https://blog.florijnconsultancy.nl/feeds/installation.rss.xml">  
  <meta name="description" content="Testopia is a testcase management system built as an extension on Bugzilla. This post contains my installation notes and my efforts to make Testopia work on my local installation. This will be updated as I go along.">


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
  <div class="col-sm-12">
    <h1 class="title"><a href="https://blog.florijnconsultancy.nl/">Daily Scrum</a></h1>
      <p class="text-muted">A personal blog</p>
      <ul class="list-inline">
          <li class="list-inline-item"><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
          <li class="list-inline-item"><a href="http://python.org/" target="_blank">Python.org</a></li>
          <li class="list-inline-item"><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
              <li class="list-inline-item text-muted">|</li>
            <li class="list-inline-item"><a href="https://blog.florijnconsultancy.nl/pages/../about.html">About</a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Installation notes&nbsp;Testopia
</h1>
      <hr>
  <article class="article">
    <header>
      <ul class="list-inline">
        <li class="list-inline-item text-muted" title="2013-04-21T21:00:00+02:00">
          <i class="fas fa-clock"></i>
          Sun 21 April 2013
        </li>
        <li class="list-inline-item">
          <i class="fas fa-folder-open"></i>
          <a href="https://blog.florijnconsultancy.nl/category/installation.html">Installation</a>
        </li>
          <li class="list-inline-item">
            <i class="fas fa-user"></i>
              <a href="https://blog.florijnconsultancy.nl/author/peter-florijn.html">Peter Florijn</a>          </li>
          <li class="list-inline-item">
            <i class="fas fa-tag"></i>
              <a href="https://blog.florijnconsultancy.nl/tag/testopia-bugzilla-testmanagement.html">#testopia bugzilla testmanagement</a>          </li>
      </ul>
    </header>
    <div class="content">
      <p>Testopia is a testcase management system built as an extension on Bugzilla. This post contains my installation notes and my efforts to make this work on my local installation. This will be updated as I go&nbsp;along.</p>
<!-- more -->

<h3 id="testopia-testcase-management-system">Testopia testcase management&nbsp;system</h3>
<h3 id="requirements">Requirements</h3>
<p>The Testopia Extension requires Bugzilla &gt;4.2.
Testopia version 2.5 is the first release that does not need a patch on Bugzilla to&nbsp;work.</p>
<h3 id="old-notes-relevant-before-v25">old notes relevant before&nbsp;v2.5</h3>
<h2 id="installation-of-testopia-extension">Installation of Testopia&nbsp;extension</h2>
<h3 id="how-to-get-testopia">How to get&nbsp;Testopia</h3>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>bzr<span class="w"> </span>branch<span class="w"> </span>bzr://bzr.mozilla.org/bugzilla/extensions/testopia/trunk
</code></pre></div>

<h3 id="patch-bugzilla-42">Patch Bugzilla&nbsp;4.2</h3>
<div class="highlight"><pre><span></span><code><span class="n">Note</span><span class="o">:</span><span class="w"> </span><span class="mi">603</span><span class="o">-</span><span class="mi">2012</span><span class="o">:</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mf">4.2</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">patching</span>
</code></pre></div>

<ol>
<li>cd to the directory with the Testopia&nbsp;trunk</li>
<li>copy items from the downloaded Testopia&nbsp;trunk </li>
<li>cd&nbsp;/usr/local/bugzilla</li>
<li>paste items from the downloaded Testopia trunk and merge the extensions&nbsp;directory</li>
<li>
<p>patch -p0 -i&nbsp;extensions/Testopia/patch-4.0</p>
<p>:::bash
patching file Bugzilla/Bug.pm
Hunk #1 succeeded at 3628 (offset 101 lines).
patching file Bugzilla/Constants.pm
Hunk #1 succeeded at 145 (offset 1 line).
Hunk #2 succeeded at 470 (offset 5 lines).
patching file Bugzilla/Error.pm
Hunk #2 succeeded at 145 (offset -6 lines).
patching file Bugzilla/Install/Filesystem.pm
Hunk #1 succeeded at 153 (offset 3 lines).
patching file Bugzilla/Search.pm
Hunk #1 <span class="caps">FAILED</span> at 510.
1 out of 1 hunk <span class="caps">FAILED</span> &#8212; saving rejects to file Bugzilla/Search.pm.rej
patching file Bugzilla/User.pm
Hunk #1 succeeded at 575 with fuzz 1 (offset 67 lines).
Hunk #2 succeeded at 936 (offset 82 lines).
Hunk #3 succeeded at 1292 (offset 130 lines).
patching file&nbsp;template/en/default/global/setting-descs.none.tmpl</p>
</li>
</ol>
<h3 id="run-checksetuppl">Run&nbsp;.checksetup.pl</h3>
<div class="highlight"><pre><span></span><code>./checksetup.pl
</code></pre></div>

<h3 id="install-additional-dependencies">Install additional&nbsp;dependencies</h3>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>/usr/bin/perl<span class="w"> </span>install-module.pl<span class="w"> </span>Text::Diff
$<span class="w"> </span>sudo<span class="w"> </span>/usr/bin/perl<span class="w"> </span>install-module.pl<span class="w"> </span>GD::Graph3d
</code></pre></div>

<h3 id="run-checksetup-again">Run .checksetup&nbsp;again</h3>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./checksetup.pl
</code></pre></div>

<p>You should now&nbsp;get </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>checksetup.pl<span class="w"> </span>complete.
</code></pre></div>

<h3 id="errors-on-filter-url_quote">Errors on <span class="caps">FILTER</span>&nbsp;url_quote</h3>
<p>Template-&gt;process() failed twice.
First error: undef error - url_quote: filter not found
Second error: undef error - url_quote: filter not&nbsp;found</p>
<p>Seems this is&nbsp;deprecated</p>
<p>Found Bugzilla message 398701 with&nbsp;fix</p>
<div class="highlight"><pre><span></span><code>find<span class="w"> </span>.<span class="w"> </span>*-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.tmpl&quot;</span><span class="w"> </span>-exec<span class="w"> </span>replace<span class="w"> </span><span class="s1">&#39;FILTER url_quote&#39;</span><span class="w"> </span><span class="s1">&#39;FILTER uri&#39;</span><span class="w"> </span>--<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>*

Executed<span class="w"> </span>this<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>Testopia<span class="w"> </span>extensions<span class="w"> </span>directory<span class="w"> </span>this<span class="w"> </span>updated<span class="w"> </span>a<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>template<span class="w"> </span>files:
:::bash
./template/en/default/hook/bug/create/create-end.html.tmpl<span class="w"> </span>converted
./template/en/default/hook/bug/edit-after_custom_fields.html.tmpl<span class="w"> </span>converted
./template/en/default/hook/bug/process/results-links.html.tmpl<span class="w"> </span>converted
./template/en/default/hook/global/common-links-link-row.html.tmpl<span class="w"> </span>converted
./template/en/default/hook/global/useful-links-end.html.tmpl<span class="w"> </span>converted
./template/en/default/testopia/reports/build-coverage.html.tmpl<span class="w"> </span>converted
./template/en/default/testopia/reports/completion.html.tmpl<span class="w"> </span>converted
./template/en/default/testopia/reports/execution.html.tmpl<span class="w"> </span>converted
./template/en/default/testopia/reports/priority-breakdown.html.tmpl<span class="w"> </span>converted
./template/en/default/testopia/reports/report-table.html.tmpl<span class="w"> </span>converted
./template/en/default/testopia/reports/report.html.tmpl<span class="w"> </span>converted
./template/en/default/testopia/reports/status.html.tmpl<span class="w"> </span>converted
./template/en/default/testopia/tag/list.html.tmpl<span class="w"> </span>converted
</code></pre></div>

<h3 id="additional-patching">Additional&nbsp;patching</h3>
<h4 id="searchpm">Search.pm</h4>
<p>There seems to be a problem in&nbsp;Bugzilla/Search.pm</p>
<p>A patch was suggested in <span class="caps">BZ</span> 596325
I copied the patch file and applied it
    :::bash
    $ sudo patch -p0 -i extensions/Testopia/patch-bz596325
    $ chgrp the Search.pm  and make it member of the _www&nbsp;group</p>
<p>Patch works and now Testopia-&gt; My plans does not give an error&nbsp;anymore</p>
<h3 id="new-plan">New&nbsp;plan</h3>
<p>It seems the link New plan is not working.
In the Apache error_log there are a lot of&nbsp;errors</p>
<div class="highlight"><pre><span></span><code>File<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist:<span class="w"> </span>/Library/WebServer/Documents/bugzilla/extensions/Testopia/extjs,<span class="w"> </span>referer:<span class="w"> </span>http://<span class="w">  </span>tooh.homedns.org/bugzilla/tr_new_plan.cgi
</code></pre></div>

<p>I did not install the extjs files so probably this is the&nbsp;problem.</p>
<p>On the Testopia wiki there is some instructions&nbsp;:::bash</p>
<div class="highlight"><pre><span></span><code>$&gt; cd path/to/bugzilla/testopia/
$&gt; wget http://extjs.com/deploy/ext-3.2.1.zip
$&gt; unzip ext-3.2.1.zip
$&gt; mv ext-3.2.1 extjs
</code></pre></div>

<p>Found out that the files are not there anymore
Downloaded the older version&nbsp;http://www.sencha.com/products/extjs/download/ext-js-3.2.1</p>
<p>Renamed the folder to&nbsp;extjs</p>
<p>Note: Don&#8217;t forget to refresh. And now it is&nbsp;working.</p>
<h3 id="new-run">New&nbsp;run</h3>
<p>Initially no testcases where shown.
Investigation of the /var/log/apache2/error_log showed that there was an error with een uninitialized variable.
I commented out use strict in the header of&nbsp;/usr/local/bugzilla/extensions/Testopia/lib/Search.pm</p>
<p>Everything <span class="caps">OK</span>&nbsp;now.</p>
<h3 id="reference">Reference</h3>
<p>[1]
<a href="http://www.mozilla.org/projects/testopia/">Testopia&nbsp;Mozilla</a></p>
    </div>
  </article>
  <hr>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function() {
      this.page.url = 'https://blog.florijnconsultancy.nl/articles/installation-notes-testopia.html';
      this.page.identifier = 'installation-notes-testopia';
    };
    (function() {
      var d = document;
      var s = d.createElement('script');
      s.src = '//dailyscrum.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript class="text-muted">
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
  </noscript>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
      <li class="list-inline-item"><a href="https://blog.florijnconsultancy.nl/authors.html">Authors</a></li>
    <li class="list-inline-item"><a href="https://blog.florijnconsultancy.nl/archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="https://blog.florijnconsultancy.nl/categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="https://blog.florijnconsultancy.nl/tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>

</body>

</html>